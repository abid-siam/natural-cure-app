{% extends "layout.html" %}
{% block content %}
    <h1>Your Diagnosis History</h1>
    {% if records %}
    <table id="viewRecordsTable" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th class="th-sm">Diagnosis Time</th>
            <th class="th-sm">Symptoms Reported</th>
            <th class="th-sm">Conditions Predicted</th>
            <th class="th-sm">Treatment Options</th>
          </tr>
        </thead>
        <tbody>
            {% for record in records %}
            <tr>
                <td>{{record.timestamp}}</td>
                <td>{{record.symptoms}}</td>
                <td>
                    <table class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                              <th class="th-sm">Condition</th>
                              <th class="th-sm">Probability</th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for diagnosis in record.conditions %}
                                <tr>
                                    {% set percent = diagnosis.probability * 100 %}
                                    <td>{{diagnosis.condition}}</td>
                                    <td>{{'%.2f'|format(percent)}}%</td>
                                </tr>
                            {% endfor %}
                          </tbody>
                    </table>
                </td>
                <td>
                    <table class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                              <th class="th-sm">Condition</th>
                              <th class="th-sm">Options</th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for diagnosis in record.treatment %}
                                <tr>
                                    <td>{{diagnosis.condition}}</td>
                                    <td>{{diagnosis.options}}</td>
                                </tr>
                            {% endfor %}
                          </tbody>
                    </table>
                </td>
              </tr>
            {% endfor %}
        </tbody>
        <tfoot>
          <tr>
            <th>Name
            </th>
            <th>Position
            </th>
            <th>Office
            </th>
            <th>Age
            </th>
            <th>Start date
            </th>
            <th>Salary
            </th>
          </tr>
        </tfoot>
      </table>
    {% else %}
    You have no records in the system
    {% endif %}
{% endblock content %}
<script>
    $(document).ready(function () {
    $('#viewRecordsTable').DataTable({
    "order": [[ 0, "desc" ]],
    "scrollY": "500px",
    "scrollCollapse": true,
    });
    $('.dataTables_length').addClass('bs-select');
    });
</script>